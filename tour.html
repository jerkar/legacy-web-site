<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Tour</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Java build tool">
    <meta name="author" content="Jerome Angibaud">
    <meta name="keywords" content="build,java,tool,automation,maven,ant,gradle,buildr,sbt,make,compiler,tester,jacoco">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <!-- <link href="css/bootstrap.min.css" rel="stylesheet">  -->
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">
    <link href="css/jerkar.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
      
    <![endif]-->
    
      <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  
  	<!-- highlight.js -->
  	<script src="js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<link rel="stylesheet" href="css/highlight-idea.css">
	
	<!-- sidebar css -->
	<link href="css/simple-sidebar.css" rel="stylesheet">
  
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">

	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand">
          	<img style="max-width:32px;margin-top: -7px;" src="img/logo.png">
          </a>
          <a class="navbar-brand">Jerkar</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation<b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="documentation/latest/getting-started.html">Getting Started</a></li>
                <li><a href="javadoc/latest/index.html">Javadoc</a></li>
              </ul>
            </li>
            <li><a href="about.html">About</a></li>
          </ul>
        </div>
       
        
      </div>
    </div>
    <div class="container">
	<p><h1>Enjoy the Jerkar tour !</h1>
<hr/><p>This page will give you a concrete idea on how Jerkar is working and what you can do with.</p><h2>Principles</h2><p>Jerkar is quite simpe in its principle. You write a class extending <code>org.jerkar.JkBuild</code> in the <em>build/def</em> folder of your project then you can execute any public zero arg methods from the command line by executing <code>jerkar myMethod1 myOtherMethod</code> at the root folder of your project.<br/>To accomplish this, Jerkar :</p>
<ul>
  <li>compiles every java sources found under the <em>build/def</em> folder</li>
  <li>instantiates the first compiled class found implementing <code>org.jerkar.JkBuild</code>. If none the <code>org.jerkar.builtins.javabuild.JkJavaBuild</code> class is instantiated</li>
  <li>invokes specified methods on the created instance. If no method is specified then the <code>doDefault</code> method is invoked</li>
</ul><p>You can also set any instance field annotated with <code>JkOption</code> from the command line by typing <code>jerkar myMethod -myField=foo</code>.<br/><br/></p><h2>Build styles</h2><p>With Jerkar you can write task based build definition (ala <em>Ant</em>), templated ones (ala <em>Maven</em>) or rely on conventions only (no build script needed). In the following section, we will illustrate different different approach to use Jerkar. </p><h3>Task based builds (ala <em>Ant</em>)</h3><p>If you like to have complete control over your build, you may prefere the <em>Ant</em> build style.<br/>The price is that you have to <em>write explicitly</em> what your build is doing. </p><p>This example mimics the <a href="http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html">tutorial ANT build script</a> </p>
<pre><code class="Java">public class AntStyleBuild extends JkBuild {

	@JkOption(&quot;Run tests in forked process if true&quot;)
	boolean forkTests;
	
	String name = &quot;myProject&quot;;
	File src = baseDir(&quot;src&quot;);
	File buildDir = baseDir(&quot;build/output&quot;);
	File classDir = new File(buildDir, &quot;classes&quot;);
	File jarFile = new File(buildDir, &quot;jar/&quot; + name + &quot;.jar&quot;);
	String className = &quot;my.mainClass&quot;;
	JkClasspath classpath = JkClasspath.of(baseDir().include(&quot;libs/*.jar&quot;));
	File reportDir = new File(buildDir, &quot;junitRreport&quot;);
	
	@Override
	public void doDefault() {
		clean();jar();run();
	}
	
	public void compile() {
		JkJavaCompiler.ofOutput(classDir).withClasspath(classpath).andSourceDir(src).compile();
		JkFileTree.of(src).exclude(&quot;**/*.java&quot;).copyTo(classDir);
	}
	
	public void jar() {
		compile();
		JkManifest.empty().addMainClass(&quot;my.main.RunClass&quot;).writeToStandardLocation(classDir);
		JkZipper.of(classDir).to(jarFile);
	}	
	
	@JkDoc(&quot;Run the application&quot;)
	public void run() {
		JkJavaProcess.of(jarFile).andClasspath(classpath).runSync();
	}
	
	public void cleanBuild() {
		clean();
		junit();
	}
	
	public void junit() {
		jar();
		JkUnit.of(classpath.and(jarFile))
				.withClassesToTest(JkFileTree.of(classDir).include(&quot;**/*Test.class&quot;))
				.withReportDir(reportDir)
				.withReport(JunitReportDetail.FULL)
				.forked(forkTest)
				.run();
	}
	
	public static void main(String[] args) {
		new AntStyleBuild().doDefault();
	}
	
}
</code></pre><p>From this build definition, we can execute Jerkar the following way :</p>
<ul>
  <li>launch/debug the <code>AntStyleBuild main</code> within your IDE</li>
  <li>launch/debug the <code>org.jerkar.JkMain main</code> method within your IDE. In this mode you can pass arguments as you would for the command line</li>
  <li>execute a command line in a shell (or on a build server) as <code>jerkar doDefault</code> or <code>jerkar cleanBuild -forkTests=true</code>.</li>
</ul><p><br/></p><h3>Templated builds (ala <em>Maven</em>)</h3><p>For Java project you may directly extend <code>JkJavaBuild</code> template class which implements common methods for you.<br/>All you need is to implement what is specific.</p>
<pre><code>public class MavenStyleBuild extends JkJavaBuild {
	
	@Override  // optional
	public JkModuleId moduleId() {
		return JkModuleId.of(&quot;org.jerkar&quot;, &quot;script-samples&quot;);
	}

	@Override  // optional
	protected JkVersion defaultVersion() {
		return JkVersion.ofName(&quot;0.3-SNAPSHOT&quot;);
	}

	@Override
	// Optional : needless if you use only local dependencies
	protected JkDependencies dependencies() {
		return JkDependencies
				.builder()
				.on(GUAVA, &quot;18.0&quot;)  // Popular modules are available as Java constant
				.on(JERSEY_SERVER, &quot;1.19&quot;)
				.on(&quot;com.orientechnologies:orientdb-client:2.0.8&quot;)
				.on(JUNIT, &quot;4.11&quot;).scope(TEST).on(MOCKITO_ALL, &quot;1.9.5&quot;)
				.scope(TEST).build();
	}

}
</code></pre><p>This example is for demo purpose. Some settings can be omitted by respecting naming conventions...<br/><br/></p><h3>Templated builds with conventions</h3><p>If you follow conventions (as project folder named as <em>groupName.projectName</em> and version stored in a <em>version.txt</em> file), the above script is reduced to :</p>
<pre><code>public class BuildSampleClassic extends JkJavaBuild {
	
	@Override  // Optional :  needless if you use only local dependencies
	protected JkDependencies dependencies() {
		return JkDependencies.builder() 
			.on(GUAVA, &quot;18.0&quot;)  
			.on(JERSEY_SERVER, &quot;1.19&quot;)
			.on(&quot;com.orientechnologies:orientdb-client:2.0.8&quot;)
			.on(JUNIT, &quot;4.11&quot;).scope(TEST)
			.on(MOCKITO_ALL, &quot;1.9.5&quot;).scope(TEST)
		.build();
	}	
}
</code></pre><h3><a name="100conventional"></a><br/>100% conventional style !!!</h3><p>If you use only local dependencies (jar dependencies located as bellow), you don't even need to write a build file.<br/>Note that local dependencies have to be located in subfolder corresponding to its scope (build, compile, runtime,...).</p><p><img src="img/full-convention-project.png" alt="Project layout full convention""/></p><h3>Eclipse style</h3><p>If Eclipse is your IDE, you can just reuse information from the <em>.classpath</em> file by using the Eclipse plugin.<br/>Project name, source folders and dependencies can be deducted from this file. Just activate the Eclipse plugin (see below).</p><h3>Custom builds with third parties</h3><p>Your build class can depend itself from managed dependencies </p>
<pre><code>@JkImport(&quot;org.seleniumhq.selenium:selenium-java:2.45.0&quot;)
public class SeleniumTaskBuild extends JkJavaBuild {
	
	@JkDoc(&quot;Performs some load test using Selenium&quot;)
	public void seleniumLoadTest() {
		WebDriver driver = new FirefoxDriver();
		// ....
	}
}
</code></pre><h3>Multi-project builds</h3><p>In a multi project context, build instances, from different projects, can use each other.<br/>In general, the build dependency schema is the same than for the code.</p>
<pre><code>// This is the master project for building the Jerkar full distribution
public class DistribAllBuild extends JkBuildDependencySupport {
	
	@JkProject(&quot;../org.jerkar.plugins-sonar&quot;)
	PluginsSonarBuild pluginsSonar;
	
	@JkProject(&quot;../org.jerkar.plugins-jacoco&quot;)
	PluginsJacocoBuild pluginsJacoco;
	
	public void doDefault() {
		super.doDefault();
		multiProjectDependencies().invokeDoDefaultMethodOnAllSubProjects();
		CoreBuild core = pluginsJacoco.core;  // The core project is got by transitivity
		
		JkFileTree sourceDir = ...;
		sourceDir.importFiles(pluginsSonar.packer().jarSourceFile(), pluginsJacoco.packer().jarSourceFile());
		...
	} 
	
	
}
</code></pre>
<div class="alert alert-info" role="alert">
<strong>Note that you can reuse external build elements in a statically typed way !!! </strong>
</div><h2>Zero build file, out of the box features</h2><p>This section answer to the following question : <blockquote>What Jerkar can do for me if I haven't written build file or have just a build file declaring dependencies only ?</blockquote></p><p>Yep, with Jerkar, if you don't have written any build file or just have a build file containing dependency definition, you can yet perform pretty sophisticated tasks. </p><h3>Basic tasks</h3>
<ul>
  <li><code>jerkar help</code> : outputs on console available methods and options for Jerkar in the current project</li>
  <li><code>jerkar</code> : cleans, compiles, unit tests and produces artifacts (this is what <code>JkJavaBuild#doDefault</code> method does)</li>
  <li><code>jerkar doDefault publish</code> : same then <code>publish</code> produced artifacts on a remote repository</li>
  <li><code>jerkar -fatJar=true -forkTests=true</code> : same but also produces a fat-jar (jar file containing all the runtime dependencies) and runs unit tests in a forked process</li>
  <li><code>jerkar -fatJar -forkTests</code> : same, when field values are not mentioned, Jerkar uses a default value (true for boolean fields)</li>
</ul><p>The last will result in the following artifact creation :<br/><img src="img/output.png" alt="Created artifacts""/></p><h3>Plugin tasks</h3><p>Template classes (<code>JkBuild</code> and <code>JkJavaBuild</code>) enable plugability by providing hooks on several methods.<br/>A plugin is just a class extending <code>JkBuildPlugin</code> or <code>JkJavaBuildPlugin</code> and overriding default hook methods. Plugins can also provide their own methods.</p>
<ul>
  <li>To activate a plugin on the command line, just mention the name of the plugin followed by a <code>#</code>.</li>
  <li>To parameter a plugin, just mention <code>-pluginName#fieldName=value</code>.</li>
  <li>To launch a method of a plugin, just mention <code>-pluginName#methodName</code>, note that the plugin does not need to be activated for invoking a plugin method.</li>
  <li>To display information about available plugins in current Jerkar instance, simply execute <code>jerkar helpPlugins</code>.</li>
</ul><h3>Examples</h3><p>Jerkar is shipped with <a href="http://eclipse.org/">Eclipse</a>, <a href="http://www.eclemma.org/jacoco">Jacoco</a> and <a href="http://www.sonarqube.org/">SonarQube</a> plugins out of the box.<br/>This is how you can leverage these plugins : </p>
<ul>
  <li><code>jerkar jacoco#</code> : does <code>doDefault</code> but unit tests will be instrumented by Jacoco code coverage tool</li>
  <li><code>jerkar jacoco# -jacoco#produceHtml</code> : same but also set the <code>JkBuildPluginJacoco#produceHtml</code> field to <code>true</code>. It leads in producing<br/>an html report along the standard jacoco.exec binary report</li>
  <li><p><code>jerkar doDefault sonar#verify</code> : does the default + execute the <code>verify</code> method located in the sonar plugin (launch a sonar analysis)<br/>Analysis is launched on a local SonarQube server unless you specify specific Sonar settings. Sonar will leverage of jacoco report</p></li>
  <li><code>jerkar doDefault verify sonar# jacoco#</code> : launches the <code>doDefault</code> and <code>verify</code> methods and activates the jacoco and sonar plugins. Sonar plugin hooks the <code>JkBuild verify</code> method by launching a SonarQube analysis</li>
</ul><h2>Power of the build API</h2><p>Jerkar framework comes with a fluent style API making a joy to perform all kind of thing generally encountered in build domain.<br/>Almost all classes coming from this API are <strong>immutable</strong> providing a high degree of robustness and reusability.</p><p>To have more insight, please visit <a href="http://jerkar.github.io/javadoc/latest/index.html">Javadoc</a>.</p><h3>File manipulation &amp; selection</h3><p>The <code>JkFileTree</code> class allow to define a set of files having a common root folder and to performs numerous operation on.<br/>The following code, show how to construct a <em>war</em> file from dispersed elements.</p>
<pre><code>JkFileTree war = JkFileTree.of(warDir).importDirContent(webappContentDir)
	.from(&quot;WEB-INF/classes&quot;).importDirContent(build.classDir())
	.from(&quot;../lib&quot;).importFiles(JkFileTree.of(libDir).include(&quot;**/*.jar&quot;);
war.zip().to(warFileDest);
</code></pre><p><code>from</code> method returns another <code>JkFileTree</code> but rooted at the specified relative path.<br/><code>importXxx</code> method copies specified element at the root of the file tree.</p><p><code>JkFileTreeSet</code>, <code>JkPath</code> (sequence of files), <code>JkZipper</code>, <code>JkFileFilter</code> and <code>JkUtilsFile</code> are the other players for manipulate files.<br/>All belong to <code>org.jerkar.file</code> package.</p>
</p>
<div id="sidebar-wrapper"><ul class="sidebar-nav">
        <li><a href="#Principles">Principles</a></li>
        <li><a href="#Build styles">Build styles</a>
          <ul class="nav">
            <li><a href="#Task based builds (ala *Ant*)">Task based builds (ala *Ant*)</a></li>
            <li><a href="#Templated builds (ala *Maven*)">Templated builds (ala *Maven*)</a></li>
            <li><a href="#Templated builds with conventions">Templated builds with conventions</a></li>
            <li><a href="#100% conventional style !!!">100% conventional style !!!</a></li>
            <li><a href="#Eclipse style">Eclipse style</a></li>
            <li><a href="#Custom builds with third parties">Custom builds with third parties</a></li>
            <li><a href="#Multi-project builds">Multi-project builds</a></li>
          </ul>
        </li>
        <li><a href="#Zero build file, out of the box features">Zero build file, out of the box features</a>
          <ul class="nav">
            <li><a href="#Basic tasks">Basic tasks</a></li>
            <li><a href="#Plugin tasks">Plugin tasks</a></li>
            <li><a href="#Examples">Examples</a></li>
          </ul>
        </li>
        <li><a href="#Power of the build API">Power of the build API</a>
          <ul class="nav">
            <li><a href="#File manipulation & selection">File manipulation & selection</a></li>
          </ul>
        </li>
</ul></div>

	<hr />

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2014 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.3.2</a></p>
      </div>
    </div>
    
   
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    
  </body>
</html>